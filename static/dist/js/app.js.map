{"version":3,"sources":["js/homepagescripts.js","js/initialize.js","js/vue/components/combo_detail_place.vue","js/vue/components/combo_list.vue","js/vue/components/place_canvas.vue","js/vue/components/place_inclusion_distance.vue","js/vue/main.js"],"names":["module","exports","initialize","body","$","csrfSafeMethod","method","test","csrftoken","val","ajaxSetup","beforeSend","xhr","settings","type","crossDomain","setRequestHeader","click","toggleClass","on","combatant","data","addClass","label_matched_combatants","removeClass","each","which_context_type","exit_apply_context","myval","active_combatant_buttons","prop","length","effect_add_form","submit","ajax","attr","url","serialize","success","id","html","index","effect_type","combatant_id","return_html","remove_combatants_form","exit_remove_context","hasClass","combatant_to_remove_selector","effect","effect_to_apply","apply_effect_type","last_updated","Date","getTime","setTimeout","poll_server","return_data","needs_update","update_all_combatants","complete","document","addEventListener","window","location","require","Vue","use","Vuex","component","components","place_canvas","place_inclusion_distance","combo_list","combo_detail_place","axios","defaults","xsrfCookieName","xsrfHeaderName","model_api_url","template_context","api_url","model_actions","get_model","context","get","baseURL","params","inclusion_distance","state","campaign","then","commit","r","catch","console","log","e","get_model_list","add_model","model","post","dispatch","change_model","delete_model","delete","model_mutators","set_model","new_data","set_model_list","model_list","store","Store","Object","assign","mutations","set_place_inclusion_distance","n","actions","refresh_model","_","debounce","el"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAAA,OAAOC,OAAP,GAAiB;;AAEbC,gBAAY,sBAAY;AACpB,YAAIC,OAAOC,EAAE,MAAF,CAAX;;AAEA,iBAASC,cAAT,CAAwBC,MAAxB,EAAgC;AAC5B;AACA,mBAAQ,8BAA6BC,IAA7B,CAAkCD,MAAlC;AAAR;AACH;;AAED,YAAIE,YAAYJ,EAAE,4BAAF,EAAgCK,GAAhC,EAAhB;;AAEAL,UAAEM,SAAF,CAAY;AACRC,wBAAY,oBAAUC,GAAV,EAAeC,QAAf,EAAyB;AACjC,oBAAI,CAACR,eAAeQ,SAASC,IAAxB,CAAD,IAAkC,CAAC,KAAKC,WAA5C,EAAyD;AACrDH,wBAAII,gBAAJ,CAAqB,aAArB,EAAoCR,SAApC;AACH;AACJ;AALO,SAAZ;;AAQAJ,UAAE,6BAAF,EAAiCa,KAAjC,CAAuC,YAAY;AAC/Cd,iBAAKe,WAAL,CAAiB,sBAAjB;AACAd,cAAE,IAAF,EAAQc,WAAR,CAAoB,YAApB;AACH,SAHD;;AAKAf,aAAKgB,EAAL,CAAQ,OAAR,EAAiB,0BAAjB,EAA6C,YAAY;AACrD,gBAAIC,YAAYhB,EAAE,IAAF,EAAQiB,IAAR,CAAa,WAAb,CAAhB;AACAlB,iBAAKmB,QAAL,CAAc,mBAAd,EAAmCD,IAAnC,CAAwC,WAAxC,EAAqDD,SAArD;AACAG;AACH,SAJD;AAKApB,aAAKgB,EAAL,CAAQ,OAAR,EAAiB,0BAAjB,EAA6C,YAAY;AACrDhB,iBAAKqB,WAAL,CAAiB,mBAAjB,EAAsCH,IAAtC,CAA2C,WAA3C,EAAwD,EAAxD;AACAjB,cAAE,0BAAF,EAA8BqB,IAA9B,CAAmC,YAAY;AAC3CrB,kBAAE,IAAF,EAAQoB,WAAR,CAAoB,yBAApB;AACH,aAFD;AAGH,SALD;;AAOApB,UAAE,sBAAF,EAA0Ba,KAA1B,CAAgC,YAAY;AACxC,gBAAIS,qBAAqBtB,EAAE,IAAF,EAAQiB,IAAR,CAAa,mBAAb,CAAzB;AACAlB,iBAAKmB,QAAL,CAAc,eAAd,EAA+BD,IAA/B,CAAoC,mBAApC,EAAyDK,kBAAzD;AACH,SAHD;;AAKAtB,UAAE,qBAAF,EAAyBa,KAAzB,CAA+BU,kBAA/B;;AAEAvB,UAAE,kBAAF,EAAsBe,EAAtB,CAAyB,oBAAzB,EAA+C,YAAY;AACvD,gBAAIS,QAAQxB,EAAE,IAAF,EAAQK,GAAR,EAAZ;AACA,gBAAIoB,2BAA2BzB,EAAE,6BAAF,CAA/B;AACA,gBAAIwB,UAAU,EAAd,EAAkB;AACdxB,kBAAE,eAAF,EAAmB0B,IAAnB,CAAwB,UAAxB,EAAoC,IAApC;AACH,aAFD,MAEO,IAAID,yBAAyBE,MAA7B,EAAqC;AACxC3B,kBAAE,eAAF,EAAmB0B,IAAnB,CAAwB,UAAxB,EAAoC,KAApC;AACH;AACDD,qCAAyBJ,IAAzB,CAA8B,YAAY;AACtC,oBAAIL,YAAYhB,EAAE,IAAF,EAAQiB,IAAR,CAAa,WAAb,CAAhB;AACAjB,kBAAE,MAAMgB,SAAN,GAAkB,GAAlB,GAAwBjB,KAAKkB,IAAL,CAAU,mBAAV,CAA1B,EAA0DZ,GAA1D,CAA8DmB,KAA9D;AACH,aAHD;AAIH,SAZD;;AAcA,YAAII,kBAAkB5B,EAAE,kBAAF,CAAtB;AACA4B,wBAAgBC,MAAhB,CAAuB,YAAY;AAC/B7B,cAAE8B,IAAF,CAAO;AACHpB,sBAAMkB,gBAAgBG,IAAhB,CAAqB,QAArB,CADH;AAEHC,qBAAKJ,gBAAgBG,IAAhB,CAAqB,QAArB,CAFF;AAGHd,sBAAMW,gBAAgBK,SAAhB,EAHH;AAIHC,yBAAS,iBAAUjB,IAAV,EAAgB;AACrBjB,sBAAE,sBAAF,EAA0BqB,IAA1B,CAA+B,YAAY;AACvC;AACA,4BAAIc,KAAKnC,EAAE,IAAF,EAAQiB,IAAR,CAAa,IAAb,CAAT;AACAjB,0BAAE,IAAF,EAAQoC,IAAR,CAAanB,KAAKkB,EAAL,CAAb;AACH,qBAJD;AAMH;AAXE,aAAP;AAaAZ;AACAvB,cAAE,kBAAF,EAAsBK,GAAtB,CAA0B,EAA1B;AACA,mBAAO,KAAP;AACH,SAjBD;;AAmBAN,aAAKgB,EAAL,CAAQ,OAAR,EAAiB,gBAAjB,EAAmC,YAAY;AAC3C,gBAAIsB,QAAQrC,EAAE,IAAF,EAAQiB,IAAR,CAAa,OAAb,CAAZ;AACA,gBAAIqB,cAActC,EAAE,IAAF,EAAQiB,IAAR,CAAa,aAAb,CAAlB;AACA,gBAAIsB,eAAevC,EAAE,IAAF,EAAQiB,IAAR,CAAa,WAAb,CAAnB;;AAEAjB,cAAE8B,IAAF,CAAO;AACHpB,sBAAM,MADH;AAEHsB,qBAAK,sBAFF;AAGHf,sBAAM;AACF,6BAASoB,KADP;AAEF,mCAAeC,WAFb;AAGF,iCAAaC;AAHX,iBAHH;AAQHL,yBAAS,iBAAUM,WAAV,EAAuB;AAC5B,wBAAIA,gBAAgB,EAApB,EAAwB;AACpB;AACH;AACDxC,sBAAE,sBAAF,EAA0BqB,IAA1B,CAA+B,YAAY;AACvC,4BAAIrB,EAAE,IAAF,EAAQiB,IAAR,CAAa,IAAb,MAAuBsB,YAA3B,EAAyC;AACrCvC,8BAAE,IAAF,EAAQoC,IAAR,CAAaI,WAAb;AACH;AACJ,qBAJD;AAKH;AAjBE,aAAP;AAmBH,SAxBD;;AA0BAzC,aAAKgB,EAAL,CAAQ,OAAR,EAAiB,uBAAjB,EAA0C,YAAY;AAClDhB,iBAAKmB,QAAL,CAAc,gBAAd;AACH,SAFD;;AAIA,YAAIuB,yBAAyBzC,EAAE,yBAAF,CAA7B;AACAyC,+BAAuBZ,MAAvB,CAA8B,YAAY;AACtC7B,cAAE8B,IAAF,CAAO;AACHpB,sBAAM+B,uBAAuBV,IAAvB,CAA4B,QAA5B,CADH;AAEHC,qBAAKS,uBAAuBV,IAAvB,CAA4B,QAA5B,CAFF;AAGHd,sBAAMwB,uBAAuBR,SAAvB,EAHH;AAIHC,yBAAS,iBAAUM,WAAV,EAAuB;AAC5B,wBAAIA,gBAAgB,EAApB,EAAwB;AACpB;AACH;AACDxC,sBAAE,sBAAF,EAA0BoC,IAA1B,CAA+BI,WAA/B;AACArB;AACH;AAVE,aAAP;AAYAuB;AACA,mBAAO,KAAP;AACH,SAfD;;AAkBA3C,aAAKgB,EAAL,CAAQ,OAAR,EAAiB,sBAAjB,EAAyC,YAAY;AACjDf,cAAE,IAAF,EAAQc,WAAR,CAAoB,QAApB;AACA,gBAAIE,YAAYhB,EAAE,IAAF,EAAQiB,IAAR,CAAa,WAAb,CAAhB;AACA,gBAAIlB,KAAK4C,QAAL,CAAc,gBAAd,CAAJ,EAAqC;AACjC,oBAAIC,+BAA+B5C,EAAE,0BAA0BgB,SAA5B,CAAnC;AACA,oBAAIhB,EAAE,IAAF,EAAQ2C,QAAR,CAAiB,QAAjB,CAAJ,EAAgC;AAC5BC,iDAA6BvC,GAA7B,CAAiC,MAAjC;AACH,iBAFD,MAEO;AACHuC,iDAA6BvC,GAA7B,CAAiC,EAAjC;AACH;AACD,oBAAIL,EAAE,6BAAF,EAAiC2B,MAArC,EAA6C;AACzC3B,sBAAE,mCAAF,EAAuC0B,IAAvC,CAA4C,UAA5C,EAAwD,KAAxD;AACH,iBAFD,MAEO;AACH1B,sBAAE,mCAAF,EAAuC0B,IAAvC,CAA4C,UAA5C,EAAwD,IAAxD;AACH;AACJ;AACD,gBAAI3B,KAAK4C,QAAL,CAAc,eAAd,CAAJ,EAAoC;AAChC,oBAAIE,SAAS,EAAb;AACA,oBAAIC,kBAAkB9C,EAAE,kBAAF,EAAsBK,GAAtB,EAAtB;AACA,oBAAI0C,oBAAoBhD,KAAKkB,IAAL,CAAU,mBAAV,CAAxB;AACA,oBAAIjB,EAAE,IAAF,EAAQ2C,QAAR,CAAiB,QAAjB,CAAJ,EAAgC;AAC5BE,6BAASC,eAAT;AACH;AACD9C,kBAAE,MAAMgB,SAAN,GAAkB,GAAlB,GAAwB+B,iBAA1B,EAA6C1C,GAA7C,CAAiDwC,MAAjD;AACA,oBAAIC,oBAAoB,EAAxB,EAA4B;AACxB,wBAAI9C,EAAE,6BAAF,EAAiC2B,MAArC,EAA6C;AACzC3B,0BAAE,eAAF,EAAmB0B,IAAnB,CAAwB,UAAxB,EAAoC,KAApC;AACH,qBAFD,MAEO;AACH1B,0BAAE,eAAF,EAAmB0B,IAAnB,CAAwB,UAAxB,EAAoC,IAApC;AACH;AACJ;AACJ;AACJ,SAhCD;;AAkCA3B,aAAKgB,EAAL,CAAQ,OAAR,EAAiB,gBAAjB,EAAmC2B,mBAAnC;;AAEA3C,aAAKgB,EAAL,CAAQ,QAAR,EAAkB,yBAAlB,EAA6C,YAAY;AACrDf,cAAE8B,IAAF,CAAO;AACHpB,sBAAMV,EAAE,IAAF,EAAQ+B,IAAR,CAAa,QAAb,CADH;AAEHC,qBAAKhC,EAAE,IAAF,EAAQ+B,IAAR,CAAa,QAAb,CAFF;AAGHd,sBAAMjB,EAAE,IAAF,EAAQiC,SAAR,EAHH;AAIHC,yBAAS,iBAAUM,WAAV,EAAuB;AAC5B,wBAAIA,gBAAgB,EAApB,EAAwB;AACpB;AACH;AACDxC,sBAAE,sBAAF,EAA0BoC,IAA1B,CAA+BI,WAA/B;AACArB;AACH;AAVE,aAAP;AAYA,mBAAO,KAAP;AACH,SAdD;AAeA,YAAI6B,eAAe,IAAIC,IAAJ,GAAWC,OAAX,EAAnB;AACAC,mBAAW,YAAY;AACnBC,wBAAYJ,YAAZ;AACH,SAFD,EAEG,IAFH;AAGH;AAtLY,CAAjB;;AAyLA,SAASzB,kBAAT,GAA8B;AAC1BvB,MAAE,MAAF,EAAUoB,WAAV,CAAsB,eAAtB;AACApB,MAAE,eAAF,EAAmBK,GAAnB,CAAuB,EAAvB;AACAL,MAAE,sBAAF,EAA0BoB,WAA1B,CAAsC,QAAtC;AACApB,MAAE,eAAF,EAAmB0B,IAAnB,CAAwB,UAAxB,EAAoC,IAApC;AACH;;AAED,SAASgB,mBAAT,GAA+B;AAC3B1C,MAAE,MAAF,EAAUoB,WAAV,CAAsB,gBAAtB;AACApB,MAAE,sBAAF,EAA0BK,GAA1B,CAA8B,EAA9B;AACAL,MAAE,sBAAF,EAA0BoB,WAA1B,CAAsC,QAAtC;AACApB,MAAE,mCAAF,EAAuC0B,IAAvC,CAA4C,UAA5C,EAAwD,IAAxD;AACH;;AAED,SAAS0B,WAAT,CAAqBJ,YAArB,EAAmC;AAC/BhD,MAAE8B,IAAF,CAAO;AACHpB,cAAM,KADH;AAEHsB,aAAK,aAFF;AAGHf,cAAM;AACF+B,0BAAcA;AADZ,SAHH;AAMHd,iBAAS,iBAAUmB,WAAV,EAAuB;AAC5B,gBAAIA,YAAYC,YAAhB,EAA8B;AAC1BC;AACAP,+BAAe,IAAIC,IAAJ,GAAWC,OAAX,EAAf;AACH;AACJ,SAXE;AAYHM,kBAAU,kBAAUvC,IAAV,EAAgB;AACtBkC,uBAAW,YAAY;AACnBC,4BAAYJ,YAAZ;AACH,aAFD,EAEG,IAFH;AAGH;AAhBE,KAAP;AAkBH;;AAED,SAASO,qBAAT,GAAiC;AAC7B,QAAIvB,MAAM,8BAAV;AACAhC,MAAE8B,IAAF,CAAO;AACHpB,cAAM,MADH;AAEHsB,aAAKA,GAFF;AAGHf,cAAM,EAHH;AAIHiB,iBAAS,iBAAUM,WAAV,EAAuB;AAC5B,gBAAIA,gBAAgB,EAApB,EAAwB;AACpB;AACH;AACDxC,cAAE,sBAAF,EAA0BoC,IAA1B,CAA+BI,WAA/B;AACArB;AACH;AAVE,KAAP;AAYH;;AAED,SAASA,wBAAT,GAAoC;AAChC,QAAIpB,OAAOC,EAAE,MAAF,CAAX;AACA,QAAID,KAAK4C,QAAL,CAAc,mBAAd,CAAJ,EAAwC;AACpC,YAAI3B,YAAYjB,KAAKkB,IAAL,CAAU,WAAV,CAAhB;AACA,YAAID,SAAJ,EAAe;AACXhB,cAAE,gEAAF,EAAoEqB,IAApE,CAAyE,YAAY;AACjF,oBAAIrB,EAAE,IAAF,EAAQiB,IAAR,CAAa,WAAb,MAA8BD,SAAlC,EAA6C;AACzChB,sBAAE,IAAF,EAAQkB,QAAR,CAAiB,yBAAjB;AACH;AACJ,aAJD;AAKH;AACJ;AACJ;;;;;;ACxPDuC,SAASC,gBAAT,CAA0B,kBAA1B,EAA8C,YAAY;AACtD1D,MAAE,gBAAF,EAAoBa,KAApB,CAA0B,YAAY;AAClC8C,eAAOC,QAAP,GAAkB5D,EAAE,IAAF,EAAQiB,IAAR,CAAa,MAAb,CAAlB;AACH,KAFD;;AAIA4C,YAAQ,gBAAR;AACH,CAND;;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5CA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/EA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnPA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvCA;AAAA;;;;ACAA;;;;AACA;;;;AACA;;;;AACA;;;;AAIA;;;;AACA;;;;AACA;;;;AACA;;;;;;AALAC,cAAIC,GAAJ,CAAQC,cAAR;;AAOAF,cAAIG,SAAJ,CAAc,cAAd,EAA8BJ,QAAQ,2BAAR,CAA9B;AACAC,cAAIG,SAAJ,CAAc,0BAAd,EAA0CJ,QAAQ,uCAAR,CAA1C;AACAC,cAAIG,SAAJ,CAAc,YAAd,EAA4BJ,QAAQ,yBAAR,CAA5B;AACAC,cAAIG,SAAJ,CAAc,oBAAd,EAAoCJ,QAAQ,iCAAR,CAApC;;AAEA,IAAMK,aAAa,EAACC,oCAAD,EAAeC,4DAAf,EAAyCC,gCAAzC,EAAqDC,gDAArD,EAAnB;;AAEAC,gBAAMC,QAAN,CAAeC,cAAf,GAAgC,WAAhC;AACAF,gBAAMC,QAAN,CAAeE,cAAf,GAAgC,aAAhC;;AAEA,IAAMC,gBAAgBC,iBAAiBC,OAAvC;;AAEA,IAAMC,gBAAgB;AAClBC,aADkB,qBACRC,OADQ,EACC7C,EADD,EACK;AACnBoC,wBAAMU,GAAN,CAAU9C,KAAK,GAAf,EAAoB;AAChB+C,qBAASP,aADO;AAEhBQ,oBAAQ;AACJC,oCAAoBJ,QAAQK,KA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","file":"../dist/js/app.js","sourcesContent":["module.exports = {\n\n    initialize: function () {\n        var body = $('body');\n\n        function csrfSafeMethod(method) {\n            // these HTTP methods do not require CSRF protection\n            return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));\n        }\n\n        var csrftoken = $(\"[name=csrfmiddlewaretoken]\").val();\n\n        $.ajaxSetup({\n            beforeSend: function (xhr, settings) {\n                if (!csrfSafeMethod(settings.type) && !this.crossDomain) {\n                    xhr.setRequestHeader(\"X-CSRFToken\", csrftoken);\n                }\n            }\n        });\n\n        $('#display-only-toggle-button').click(function () {\n            body.toggleClass('context-display-only');\n            $(this).toggleClass('text-muted')\n        });\n\n        body.on('click', '.combatant-context-enter', function () {\n            var combatant = $(this).data('combatant');\n            body.addClass('context-combatant').data('combatant', combatant);\n            label_matched_combatants()\n        });\n        body.on('click', '.combatant-context-leave', function () {\n            body.removeClass('context-combatant').data('combatant', '');\n            $('.context-combatant-match').each(function () {\n                $(this).removeClass('context-combatant-match');\n            });\n        });\n\n        $('.enter-apply-context').click(function () {\n            var which_context_type = $(this).data('apply-effect-type');\n            body.addClass('context-apply').data('apply-effect-type', which_context_type);\n        });\n\n        $('.exit-apply-context').click(exit_apply_context);\n\n        $('#effect-to-apply').on(\"change paste keyup\", function () {\n            var myval = $(this).val();\n            var active_combatant_buttons = $('.context-activatable.active');\n            if (myval === '') {\n                $('#apply-button').prop('disabled', true);\n            } else if (active_combatant_buttons.length) {\n                $('#apply-button').prop('disabled', false);\n            }\n            active_combatant_buttons.each(function () {\n                var combatant = $(this).data('combatant');\n                $('#' + combatant + '-' + body.data('apply-effect-type')).val(myval)\n            })\n        });\n\n        var effect_add_form = $('#effect-add-form');\n        effect_add_form.submit(function () {\n            $.ajax({\n                type: effect_add_form.attr('method'),\n                url: effect_add_form.attr('action'),\n                data: effect_add_form.serialize(),\n                success: function (data) {\n                    $(\".combatant-card-body\").each(function () {\n                        // todo change combatant card body data-id to data-combatant\n                        var id = $(this).data('id');\n                        $(this).html(data[id]);\n                    });\n\n                }\n            });\n            exit_apply_context();\n            $('#effect-to-apply').val('');\n            return false;\n        });\n\n        body.on('click', '.remove-effect', function () {\n            var index = $(this).data('index');\n            var effect_type = $(this).data('effect-type');\n            var combatant_id = $(this).data('combatant');\n\n            $.ajax({\n                type: 'post',\n                url: '/ajax/remove-effect/',\n                data: {\n                    'index': index,\n                    'effect_type': effect_type,\n                    'combatant': combatant_id\n                },\n                success: function (return_html) {\n                    if (return_html === '') {\n                        return\n                    }\n                    $(\".combatant-card-body\").each(function () {\n                        if ($(this).data('id') === combatant_id) {\n                            $(this).html(return_html);\n                        }\n                    });\n                }\n            })\n        });\n\n        body.on('click', '#enter-remove-context', function () {\n            body.addClass('context-remove');\n        });\n\n        var remove_combatants_form = $('#remove-combatants-form');\n        remove_combatants_form.submit(function () {\n            $.ajax({\n                type: remove_combatants_form.attr('method'),\n                url: remove_combatants_form.attr('action'),\n                data: remove_combatants_form.serialize(),\n                success: function (return_html) {\n                    if (return_html === '') {\n                        return\n                    }\n                    $('#combatant-card-deck').html(return_html);\n                    label_matched_combatants();\n                }\n            });\n            exit_remove_context();\n            return false;\n        });\n\n\n        body.on('click', '.context-activatable', function () {\n            $(this).toggleClass('active');\n            var combatant = $(this).data('combatant');\n            if (body.hasClass('context-remove')) {\n                var combatant_to_remove_selector = $(\"#combatant-to-remove-\" + combatant);\n                if ($(this).hasClass('active')) {\n                    combatant_to_remove_selector.val('True')\n                } else {\n                    combatant_to_remove_selector.val('')\n                }\n                if ($('.context-activatable.active').length) {\n                    $('#confirm-remove-combatants-button').prop('disabled', false);\n                } else {\n                    $('#confirm-remove-combatants-button').prop('disabled', true);\n                }\n            }\n            if (body.hasClass('context-apply')) {\n                var effect = '';\n                var effect_to_apply = $('#effect-to-apply').val();\n                var apply_effect_type = body.data('apply-effect-type');\n                if ($(this).hasClass('active')) {\n                    effect = effect_to_apply\n                }\n                $('#' + combatant + '-' + apply_effect_type).val(effect);\n                if (effect_to_apply !== '') {\n                    if ($('.context-activatable.active').length) {\n                        $('#apply-button').prop('disabled', false);\n                    } else {\n                        $('#apply-button').prop('disabled', true);\n                    }\n                }\n            }\n        });\n\n        body.on('click', '#cancel-remove', exit_remove_context);\n\n        body.on('submit', '.update-initiative-form', function () {\n            $.ajax({\n                type: $(this).attr('method'),\n                url: $(this).attr('action'),\n                data: $(this).serialize(),\n                success: function (return_html) {\n                    if (return_html === '') {\n                        return\n                    }\n                    $(\"#combatant-card-deck\").html(return_html);\n                    label_matched_combatants();\n                }\n            });\n            return false;\n        });\n        var last_updated = new Date().getTime();\n        setTimeout(function () {\n            poll_server(last_updated)\n        }, 2500);\n    }\n};\n\nfunction exit_apply_context() {\n    $('body').removeClass('context-apply');\n    $('.effect-input').val('');\n    $('.context-activatable').removeClass('active');\n    $('#apply-button').prop('disabled', true)\n}\n\nfunction exit_remove_context() {\n    $('body').removeClass('context-remove');\n    $('.combatant-to-remove').val('');\n    $('.context-activatable').removeClass('active');\n    $('#confirm-remove-combatants-button').prop('disabled', true)\n}\n\nfunction poll_server(last_updated) {\n    $.ajax({\n        type: 'get',\n        url: '/ajax/poll/',\n        data: {\n            last_updated: last_updated\n        },\n        success: function (return_data) {\n            if (return_data.needs_update) {\n                update_all_combatants();\n                last_updated = new Date().getTime();\n            }\n        },\n        complete: function (data) {\n            setTimeout(function () {\n                poll_server(last_updated)\n            }, 2500);\n        }\n    })\n}\n\nfunction update_all_combatants() {\n    var url = '/ajax/update-all-combatants/';\n    $.ajax({\n        type: 'post',\n        url: url,\n        data: {},\n        success: function (return_html) {\n            if (return_html === '') {\n                return\n            }\n            $(\"#combatant-card-deck\").html(return_html);\n            label_matched_combatants();\n        }\n    });\n}\n\nfunction label_matched_combatants() {\n    var body = $('body');\n    if (body.hasClass('context-combatant')) {\n        var combatant = body.data('combatant');\n        if (combatant) {\n            $('.combatant-context-match-hide, .combatant-context-unmatch-hide').each(function () {\n                if ($(this).data('combatant') === combatant) {\n                    $(this).addClass('context-combatant-match')\n                }\n            });\n        }\n    }\n}","document.addEventListener('DOMContentLoaded', function () {\r\n    $('.clickable-row').click(function () {\r\n        window.location = $(this).data(\"href\");\r\n    });\r\n\r\n    require('js/vue/main.js');\r\n});\r\n",";(function(){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = {\n    props: {\n        model_name: '',\n        model_name_plural: '',\n        object_json: null\n    },\n    data: function data() {\n        return {};\n    },\n\n    computed: {\n        object: function object() {\n            return this.$store.state.model;\n        }\n    },\n    watch: {},\n    methods: {},\n    created: function created() {\n        if (this.object_json) {\n            this.$store.commit('set_model', JSON.parse(this.object_json));\n        }\n    }\n};\n})()\nif (module.exports.__esModule) module.exports = module.exports.default\nvar __vue__options__ = (typeof module.exports === \"function\"? module.exports.options: module.exports)\nif (__vue__options__.functional) {console.error(\"[vueify] functional components are not supported and should be defined in plain js files using render functions.\")}\n__vue__options__.render = function render () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.object)?_c('div',{staticClass:\"card\"},[_c('h3',{staticClass:\"card-header bg-dark text-white\",staticStyle:{\"text-transform\":\"capitalize\"}},[_vm._v(\"\\n    \"+_vm._s(_vm.object.name)+\"\\n  \")]),_vm._v(\" \"),_c('div',{staticClass:\"card-body\"},[_vm._v(\"\\n    \"+_vm._s(_vm.object.description)+\"\\n  \")]),_vm._v(\" \"),_c('div',{staticClass:\"card-footer\"},[_vm._v(\"\\n    Some footer text\\n  \")])]):_vm._e()])}\n__vue__options__.staticRenderFns = []\nif (module.hot) {(function () {  var hotAPI = require(\"vue-hot-reload-api\")\n  hotAPI.install(require(\"vue\"), true)\n  if (!hotAPI.compatible) return\n  module.hot.accept()\n  if (!module.hot.data) {\n    hotAPI.createRecord(\"data-v-98f0227c\", __vue__options__)\n  } else {\n    hotAPI.rerender(\"data-v-98f0227c\", __vue__options__)\n  }\n})()}",";(function(){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n    props: {\n        model_name: '',\n        model_name_plural: '',\n        object_list_json: null\n    },\n    data: function data() {\n        return {\n            search_bar: ''\n        };\n    },\n\n    computed: {\n        object_list: function object_list() {\n            return this.$store.state.model_list;\n        },\n        sorted_object_list: function sorted_object_list() {\n            if (this.object_list) {\n                return _lodash2.default.sortBy(this.object_list, function (model) {\n                    return model.name;\n                });\n            } else return [];\n        },\n        sorted_and_filtered_object_list: function sorted_and_filtered_object_list() {\n            var _this = this;\n\n            if (this.sorted_object_list) {\n                return this.sorted_object_list.filter(function (model) {\n                    return model.name.toLowerCase().includes(_this.search_bar.toLowerCase());\n                });\n            } else return [];\n        }\n    },\n    watch: {},\n    methods: {\n        set_object: function set_object(id) {\n            this.$store.dispatch('get_model', id);\n        },\n        is_active: function is_active(id) {\n            if (!this.$store.state.model) return false;\n            return id === this.$store.state.model.id;\n        }\n    },\n    created: function created() {\n        if (this.object_list_json) {\n            this.$store.commit('set_model_list', JSON.parse(this.object_list_json));\n        } else {\n            this.$store.dispatch('get_model_list');\n        }\n    }\n};\n})()\nif (module.exports.__esModule) module.exports = module.exports.default\nvar __vue__options__ = (typeof module.exports === \"function\"? module.exports.options: module.exports)\nif (__vue__options__.functional) {console.error(\"[vueify] functional components are not supported and should be defined in plain js files using render functions.\")}\n__vue__options__.render = function render () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"mb-1 form-group\"},[_c('label',{attrs:{\"for\":\"combo-list-filter\"}},[_vm._v(\"Filter\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.search_bar),expression:\"search_bar\"}],staticClass:\"form-control\",attrs:{\"id\":\"combo-list-filter\"},domProps:{\"value\":(_vm.search_bar)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.search_bar=$event.target.value}}})]),_vm._v(\" \"),_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-header bg-dark text-white\",staticStyle:{\"text-transform\":\"capitalize\"}},[_c('h3',[_vm._v(_vm._s(_vm.model_name_plural))])]),_vm._v(\" \"),_c('div',{staticStyle:{\"max-height\":\"calc(100% - 300px)\",\"overflow-y\":\"auto\"}},[_c('div',{staticClass:\"list-group list-group-flush\"},_vm._l((_vm.sorted_and_filtered_object_list),function(object){return _c('button',{staticClass:\"list-group-item list-group-item-action\",class:_vm.is_active(object.id) ? 'active' : '',on:{\"click\":function($event){_vm.set_object(object.id)}}},[_vm._v(\"\\n          \"+_vm._s(object.name)+\"\\n        \")])}))]),_vm._v(\" \"),_c('div',{staticClass:\"card-footer\"},[_c('button',{staticClass:\"btn btn-outline-primary\"},[_vm._v(\"Add a new \"+_vm._s(_vm.model_name))])])])])}\n__vue__options__.staticRenderFns = []\nif (module.hot) {(function () {  var hotAPI = require(\"vue-hot-reload-api\")\n  hotAPI.install(require(\"vue\"), true)\n  if (!hotAPI.compatible) return\n  module.hot.accept()\n  if (!module.hot.data) {\n    hotAPI.createRecord(\"data-v-7799bb72\", __vue__options__)\n  } else {\n    hotAPI.rerender(\"data-v-7799bb72\", __vue__options__)\n  }\n})()}",";(function(){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _axios = require('axios');\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n    props: {\n        place_list_json: null\n    },\n    data: function data() {\n        return {\n            temp_points: [],\n            temp_type: null,\n            hovering_enabled: true,\n            selected_place_edits: null,\n            place_types: {\n                200: 'misc region',\n                201: 'geological',\n                202: 'vegetation',\n                203: 'water',\n                204: 'political',\n                100: 'misc line',\n                101: 'road',\n                102: 'river',\n                0: 'misc point',\n                1: 'settlement',\n                2: 'natural',\n                3: 'dungeon'\n            },\n            editing: null,\n            mousedown_on_temp_point: false,\n            mouse_moving_on_temp_point: false\n        };\n    },\n\n    computed: {\n        no_temp_points_selected: function no_temp_points_selected() {\n            for (var i = 0; i < this.temp_points.length; i++) {\n                if (this.temp_points[i].selected) {\n                    return false;\n                }\n            }\n            return true;\n        },\n        inclusion_distance: function inclusion_distance() {\n            return this.$store.state.campaign.place_inclusion_distance;\n        },\n        selected_place: function selected_place() {\n            return this.$store.state.model;\n        },\n        places: function places() {\n            return this.$store.state.model_list;\n        }\n    },\n    watch: {\n        inclusion_distance: function inclusion_distance(new_dist, old_dist) {\n            this.$store.state.refresh_model();\n        }\n    },\n    methods: {\n        get_click_coords: function get_click_coords(event) {\n            var bound = document.getElementById('place-canvas').getBoundingClientRect();\n            var html = document.documentElement;\n            var left = bound.left + window.pageXOffset - html.clientLeft;\n            var top = bound.top + window.pageYOffset - html.clientTop;\n            var x = event.pageX - left;\n            var y = event.pageY - top;\n            return { x: x, y: y };\n        },\n        enter_create_place_context: function enter_create_place_context(context) {\n            this.temp_type = context;\n            this.hovering_enabled = false;\n            this.selected_place = null;\n        },\n        exit_and_save_place: function exit_and_save_place() {\n            var new_place = {\n                name: 'new Place',\n                points: this.temp_points,\n                type: this.temp_type\n            };\n            this.$store.dispatch('add_model', new_place);\n            this.exit_edit_place_context();\n        },\n        exit_edit_place_context: function exit_edit_place_context() {\n            this.temp_points = [];\n            this.temp_type = null;\n            this.hovering_enabled = true;\n        },\n        generate_temp_point: function generate_temp_point(event) {\n            if (this.mousedown_on_temp_point) return;\n            if (this.temp_type) {\n                var coords = this.get_click_coords(event);\n                if (this.temp_type < 100) {\n                    this.temp_points.pop();\n                }\n                this.temp_points.push(coords);\n            }\n        },\n        points_to_pointstring: function points_to_pointstring(points_obj) {\n            var pointstring = '';\n            points_obj.forEach(function (point) {\n                pointstring += point.x + ',' + point.y + ' ';\n            });\n            return pointstring;\n        },\n        place_clicked: function place_clicked(event) {\n            if (this.temp_type) {\n                return;\n            }\n            var place = $(event.target);\n            if (place.hasClass('line-expander')) {\n                place = place.next();\n            }\n            this.select_place(this.html_id_2_pk(place.attr('id')));\n        },\n        select_place: function select_place(pk) {\n            if (this.selected_place && this.selected_place.id === pk) {\n                this.selected_place = null;\n            } else {\n                this.$store.dispatch('get_model', pk);\n            }\n        },\n        enter_edit_selected_place_context: function enter_edit_selected_place_context() {\n            this.hovering_enabled = false;\n            this.editing = this.selected_place.id;\n            this.temp_type = this.selected_place.type;\n            this.temp_points = JSON.parse(JSON.stringify(this.selected_place.points));\n            this.selected_place_edits = JSON.parse(JSON.stringify(this.selected_place));\n        },\n        exit_and_save_selected_place: function exit_and_save_selected_place() {\n            this.selected_place_edits.points = this.temp_points;\n            this.$store.dispatch('change_model', this.selected_place_edits);\n            this.exit_edit_context();\n        },\n        delete_selected_place: function delete_selected_place() {\n            this.$store.dispatch('delete_model', this.selected_place.id);\n            this.exit_edit_context();\n        },\n        exit_edit_context: function exit_edit_context() {\n            this.editing = null;\n            this.selected_place_edits = null;\n            this.exit_edit_place_context();\n        },\n        have_same_dimensions: function have_same_dimensions(type1, type2) {\n            return ~~(type1 / 100) === ~~(type2 / 100);\n        },\n        temp_point_mousedown: function temp_point_mousedown(event) {\n            var id = parseInt(event.target.id.split('-')[2]);\n            var $body = $('body');\n            var parent = this;\n            this.mousedown_on_temp_point = true;\n            $body.on('mousemove click', function handler(event) {\n                if (event.type === 'mousemove') {\n                    var coords = parent.get_click_coords(event);\n                    parent.temp_points[id].x = coords.x;\n                    parent.temp_points[id].y = coords.y;\n                    parent.mouse_moving_on_temp_point = true;\n                } else {\n                    $body.off('mousemove click', handler);\n                    parent.mousedown_on_temp_point = false;\n                    parent.mouse_moving_on_temp_point = false;\n                }\n            });\n        },\n        temp_point_click: function temp_point_click(event) {\n            if (this.mouse_moving_on_temp_point) return;\n\n            var $clicked = $(event.target);\n            var id = parseInt($clicked.attr('id').split('-')[2]);\n            if (this.temp_points[id].selected) {\n                this.temp_points[id].selected = false;\n            } else {\n                this.$set(this.temp_points[id], 'selected', true);\n            }\n        },\n        delete_temp_points: function delete_temp_points() {\n            for (var i = this.temp_points.length - 1; i >= 0; i--) {\n                if (this.temp_points[i].selected) {\n                    this.temp_points.splice(i, 1);\n                }\n            }\n        },\n        html_id_2_pk: function html_id_2_pk(html_id) {\n            return parseInt(html_id.split('-')[1]);\n        },\n        pk_2_html_id: function pk_2_html_id(pk) {\n            return 'place-' + pk;\n        },\n        place_type_2_class: function place_type_2_class(type) {\n            return 'place-type-' + type;\n        },\n        class_2_place_type: function class_2_place_type(cls) {\n            return parseInt(cls.split('-')[2]);\n        },\n        is_active: function is_active(pk) {\n            return this.selected_place && this.selected_place.id === pk;\n        },\n        toggle_type_visibility: function toggle_type_visibility(type) {\n            $('.' + this.place_type_2_class(type)).toggleClass('d-none');\n        }\n    },\n    created: function created() {\n        if (this.place_list_json) {\n            this.$store.commit('set_model_list', JSON.parse(this.place_list_json));\n        } else {\n            this.$store.dispatch('get_model_list');\n        }\n    }\n};\n})()\nif (module.exports.__esModule) module.exports = module.exports.default\nvar __vue__options__ = (typeof module.exports === \"function\"? module.exports.options: module.exports)\nif (__vue__options__.functional) {console.error(\"[vueify] functional components are not supported and should be defined in plain js files using render functions.\")}\n__vue__options__.render = function render () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-0 p-0\"},[_c('div',{staticClass:\"row container-fluid px-5\"},[_c('div',{staticClass:\"col\"},[(_vm.selected_place)?_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-header bg-dark text-white\"},[_c('div',{staticClass:\"row form-inline\"},[(! _vm.editing)?_c('h4',{staticClass:\"col\"},[_vm._v(_vm._s(_vm.selected_place.name))]):_c('label',[_vm._v(\"\\n              Name: \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selected_place_edits.name),expression:\"selected_place_edits.name\"}],staticClass:\"mx-1 col form-control\",domProps:{\"value\":(_vm.selected_place_edits.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.selected_place_edits, \"name\", $event.target.value)}}})]),_vm._v(\" \"),(! _vm.editing)?_c('button',{staticClass:\"btn btn-outline-light col-auto ml-auto mr-1\",on:{\"click\":_vm.enter_edit_selected_place_context}},[_vm._v(\"\\n              Edit\\n            \")]):_vm._e(),_vm._v(\" \"),(_vm.editing)?_c('button',{staticClass:\"btn btn-danger col-auto ml-auto mr-1\",attrs:{\"data-toggle\":\"modal\",\"data-target\":\"#confirm-delete-modal\"}},[_vm._v(\"\\n              Delete\\n            \")]):_vm._e(),_vm._v(\" \"),(_vm.editing)?_c('button',{staticClass:\"btn btn-secondary col-auto mr-1\",on:{\"click\":_vm.exit_edit_context}},[_vm._v(\"\\n              Cancel\\n            \")]):_vm._e(),_vm._v(\" \"),(_vm.editing)?_c('button',{staticClass:\"btn btn-success col-auto mr-1\",on:{\"click\":_vm.exit_and_save_selected_place}},[_vm._v(\"\\n              Save\\n            \")]):_vm._e()])]),_vm._v(\" \"),_c('div',{staticClass:\"card-body\"},[(! _vm.editing)?[_vm._v(_vm._s(_vm.selected_place.description))]:[_c('label',{attrs:{\"for\":\"selected-place-description\"}},[_vm._v(\"Description: \")]),_vm._v(\" \"),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selected_place_edits.description),expression:\"selected_place_edits.description\"}],staticClass:\"form-control\",attrs:{\"id\":\"selected-place-description\"},domProps:{\"value\":(_vm.selected_place_edits.description)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.selected_place_edits, \"description\", $event.target.value)}}})]],2),_vm._v(\" \"),(! _vm.editing)?[_c('hr'),_vm._v(\" \"),_c('div',{staticClass:\"card-body\"},[_vm._v(\"\\n            Nearby places:\\n            \"),_c('ul',{staticClass:\"list-inline\"},_vm._l((_vm.selected_place.nearby_places),function(place){return _c('li',{staticClass:\"list-inline-item\"},[_c('button',{staticClass:\"btn btn-outline-dark\",on:{\"click\":function($event){_vm.select_place(parseInt(place.id))}}},[_vm._v(\"\\n                  \"+_vm._s(place.name)+\"\\n                \")])])}))])]:_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"card-footer\"},[(! _vm.editing)?[_vm._v(_vm._s(_vm.place_types[_vm.selected_place.type]))]:[_c('label',{attrs:{\"for\":\"selected-place-type\"}},[_vm._v(\"Type: \")]),_vm._v(\" \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selected_place_edits.type),expression:\"selected_place_edits.type\"}],staticClass:\"form-control\",attrs:{\"id\":\"selected-place-type\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.selected_place_edits, \"type\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_vm._l((_vm.place_types),function(name,type){return [(_vm.have_same_dimensions(type, _vm.selected_place.type))?_c('option',{domProps:{\"value\":type}},[_vm._v(\"\\n                  \"+_vm._s(name)+\"\\n                \")]):_vm._e()]})],2)]],2)],2):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"col-auto ml-auto p-0\"},[_c('svg',{attrs:{\"id\":\"place-canvas\"},on:{\"click\":function($event){_vm.generate_temp_point($event)}}},[_c('defs',[_c('filter',{attrs:{\"id\":\"innershadow\"}},[_c('feGaussianBlur',{attrs:{\"in\":\"SourceGraphic\",\"stdDeviation\":\"5\",\"result\":\"blur\"}}),_vm._v(\" \"),_c('feComposite',{attrs:{\"in2\":\"SourceGraphic\",\"operator\":\"arithmetic\",\"k2\":\"-1\",\"k3\":\"1\",\"result\":\"shadowDiff\"}})],1)]),_vm._v(\" \"),_vm._l((_vm.places),function(place){return [(place.id !== _vm.editing)?[(_vm.have_same_dimensions(place.type, 200))?_c('g',[_c('polygon',{class:_vm.place_type_2_class(place.type),attrs:{\"points\":_vm.points_to_pointstring(place.points),\"filter\":\"url(#innershadow)\"}}),_vm._v(\" \"),_c('polygon',{class:[{ 'hoverable-place': _vm.hovering_enabled},\n                                _vm.is_active(place.id) ? 'active' : '',\n                                'place-poly-outline',\n                                _vm.place_type_2_class(place.type)],attrs:{\"points\":_vm.points_to_pointstring(place.points),\"id\":_vm.pk_2_html_id(place.id)},on:{\"click\":function($event){_vm.place_clicked($event)}}})]):(_vm.have_same_dimensions(place.type, 100))?_c('g',[_c('polyline',{class:['line-expander', _vm.place_type_2_class(place.type)],attrs:{\"points\":_vm.points_to_pointstring(place.points)},on:{\"click\":function($event){_vm.place_clicked($event)}}}),_vm._v(\" \"),_c('polyline',{class:[{ 'hoverable-place': _vm.hovering_enabled},\n                           _vm.place_type_2_class(place.type),\n                           _vm.is_active(place.id) ? 'active' : ''],attrs:{\"points\":_vm.points_to_pointstring(place.points),\"id\":_vm.pk_2_html_id(place.id)},on:{\"click\":function($event){_vm.place_clicked($event)}}})]):(_vm.have_same_dimensions(place.type, 0))?_vm._l((place.points),function(pt){return _c('circle',{class:[{ 'hoverable-place': _vm.hovering_enabled},\n                             _vm.place_type_2_class(place.type),\n                             _vm.is_active(place.id) ? 'active' : ''],attrs:{\"cx\":pt.x,\"cy\":pt.y,\"r\":\"5\",\"id\":_vm.pk_2_html_id(place.id)},on:{\"click\":function($event){_vm.place_clicked($event)}}})}):_vm._e()]:_vm._e()]}),_vm._v(\" \"),(200 <= _vm.temp_type)?_c('g',[_c('polygon',{class:_vm.place_type_2_class(_vm.temp_type),attrs:{\"points\":_vm.points_to_pointstring(_vm.temp_points),\"filter\":\"url(#innershadow)\"}}),_vm._v(\" \"),_c('polygon',{class:['place-poly-outline',\n                            _vm.place_type_2_class(_vm.temp_type)],attrs:{\"points\":_vm.points_to_pointstring(_vm.temp_points)}})]):(100 <= _vm.temp_type)?_c('polyline',{class:_vm.place_type_2_class(_vm.temp_type),attrs:{\"points\":_vm.points_to_pointstring(_vm.temp_points)}}):_vm._l((_vm.temp_points),function(pt){return _c('circle',{class:_vm.place_type_2_class(_vm.temp_type),attrs:{\"cx\":pt.x,\"cy\":pt.y,\"r\":\"5\"}})}),_vm._v(\" \"),_vm._l((_vm.temp_points),function(pt,index){return (100 <= _vm.temp_type)?_c('circle',{class:{ 'place-temp-point': true,\n                        'hoverable-place': true,\n                        active: pt.selected },attrs:{\"id\":'temp-circle-' + index,\"cx\":pt.x,\"cy\":pt.y,\"r\":\"5\"},on:{\"mousedown\":function($event){_vm.temp_point_mousedown($event)},\"click\":function($event){_vm.temp_point_click($event)}}}):_vm._e()})],2)]),_vm._v(\" \"),_c('div',{staticClass:\"col-auto ml-2\"},[(_vm.editing)?_c('div',{staticClass:\"mb-1\"},[_c('button',{class:['btn', 'btn-danger',\n                         {'disabled': _vm.no_temp_points_selected}],on:{\"click\":_vm.delete_temp_points}},[_vm._v(\"\\n          Delete point(s)\\n        \")])]):_vm._e(),_vm._v(\" \"),(_vm.temp_type && !_vm.editing)?_c('div',{staticClass:\"mb-1\"},[_c('button',{staticClass:\"btn btn-outline-success\",on:{\"click\":_vm.exit_and_save_place}},[_vm._v(\"\\n          Save\\n        \")]),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-outline-danger\",on:{\"click\":_vm.exit_edit_place_context}},[_vm._v(\"\\n          Cancel\\n        \")])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-header bg-dark text-white\"},[_vm._v(\"\\n          Key\\n        \")]),_vm._v(\" \"),_c('ul',{staticClass:\"list-group list-group-flush\"},_vm._l((_vm.place_types),function(name,type){return _c('li',{staticClass:\"list-group-item d-flex align-items-center px-3\"},[_c('svg',{staticClass:\"mr-1\",attrs:{\"width\":\"16\",\"height\":\"16\"}},[(type < 100)?_c('circle',{class:_vm.place_type_2_class(type),attrs:{\"cx\":\"8\",\"cy\":\"8\",\"r\":\"5\"}}):(type < 200)?_c('polyline',{class:_vm.place_type_2_class(type),attrs:{\"points\":\"2,2 4,12 14,14\"}}):_c('g',[_c('polygon',{class:_vm.place_type_2_class(type),attrs:{\"points\":\"2,2 50,0 0,50\",\"filter\":\"url(#innershadow)\"}}),_vm._v(\" \"),_c('polygon',{class:['place-poly-outline', _vm.place_type_2_class(type)],attrs:{\"points\":\"2,2 50,0 0,50\"}})])]),_vm._v(\" \"),_c('span',{staticClass:\"mr-1\"},[_vm._v(_vm._s(name))]),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-sm btn-outline-dark ml-auto mr-1\",staticStyle:{\"position\":\"relative\"},attrs:{\"data-toggle\":\"button\",\"aria-pressed\":\"false\"},on:{\"click\":function($event){_vm.toggle_type_visibility(type)}}},[_c('svg',{staticStyle:{\"position\":\"absolute\",\"top\":\"7px\",\"left\":\"8px\"},attrs:{\"width\":\"14\",\"height\":\"14\"}},[_c('polyline',{attrs:{\"points\":\"14,0 0,14\",\"stroke\":\"white\",\"fill\":\"none\",\"stroke-width\":\"2\"}})]),_vm._v(\" \"),_c('span',{staticClass:\"oi oi-eye\",attrs:{\"title\":\"visibility\",\"aria-hidden\":\"true\"}})]),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-sm btn-outline-dark\",on:{\"click\":function($event){_vm.enter_create_place_context(type)}}},[_vm._v(\"+\")])])}))])])]),_vm._v(\" \"),(_vm.selected_place && _vm.editing)?_c('div',{staticClass:\"modal fade\",attrs:{\"id\":\"confirm-delete-modal\",\"tabindex\":\"-1\",\"role\":\"dialog\",\"aria-labelledby\":\"confirm-delete-title\",\"aria-hidden\":\"true\"}},[_c('div',{staticClass:\"modal-dialog modal-dialog-centered\",attrs:{\"role\":\"document\"}},[_c('div',{staticClass:\"modal-content\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"modal-body\"},[_vm._v(\"\\n          Are you sure you want to delete \"+_vm._s(_vm.selected_place.name)+\"? This cannot be undone.\\n        \")]),_vm._v(\" \"),_c('div',{staticClass:\"modal-footer\"},[_c('button',{staticClass:\"btn btn-secondary\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\"}},[_vm._v(\"Cancel\")]),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-danger\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\"},on:{\"click\":_vm.delete_selected_place}},[_vm._v(\"\\n            Yes, delete \"+_vm._s(_vm.selected_place.name)+\"\\n          \")])])])])]):_vm._e()])}\n__vue__options__.staticRenderFns = [function render () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal-header\"},[_c('h5',{staticClass:\"modal-title\",attrs:{\"id\":\"confirm-delete-title\"}},[_vm._v(\"Confirm delete\")]),_vm._v(\" \"),_c('button',{staticClass:\"close\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\"}},[_c('span',{attrs:{\"aria-hidden\":\"true\"}},[_vm._v(\"×\")])])])}]\nif (module.hot) {(function () {  var hotAPI = require(\"vue-hot-reload-api\")\n  hotAPI.install(require(\"vue\"), true)\n  if (!hotAPI.compatible) return\n  module.hot.accept()\n  if (!module.hot.data) {\n    hotAPI.createRecord(\"data-v-7661dca8\", __vue__options__)\n  } else {\n    hotAPI.reload(\"data-v-7661dca8\", __vue__options__)\n  }\n})()}",";(function(){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = {\n    data: function data() {\n        return {};\n    },\n\n    computed: {\n        inclusion_distance: {\n            get: function get() {\n                return this.$store.state.campaign.place_inclusion_distance;\n            },\n            set: function set(value) {\n                this.$store.commit('set_place_inclusion_distance', value);\n            }\n        }\n    },\n    methods: {},\n    created: function created() {}\n};\n})()\nif (module.exports.__esModule) module.exports = module.exports.default\nvar __vue__options__ = (typeof module.exports === \"function\"? module.exports.options: module.exports)\nif (__vue__options__.functional) {console.error(\"[vueify] functional components are not supported and should be defined in plain js files using render functions.\")}\n__vue__options__.render = function render () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"form-group\"},[_c('label',{staticClass:\"dropdown-header\",attrs:{\"for\":\"navbar-inclusion-distance\"}},[_vm._v(\"Inclusion distance\")]),_vm._v(\" \"),_c('div',{staticClass:\"px-4\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.inclusion_distance),expression:\"inclusion_distance\"}],staticClass:\"form-control\",attrs:{\"id\":\"navbar-inclusion-distance\",\"type\":\"number\",\"min\":\"0\"},domProps:{\"value\":(_vm.inclusion_distance)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.inclusion_distance=$event.target.value}}})])])}\n__vue__options__.staticRenderFns = []\nif (module.hot) {(function () {  var hotAPI = require(\"vue-hot-reload-api\")\n  hotAPI.install(require(\"vue\"), true)\n  if (!hotAPI.compatible) return\n  module.hot.accept()\n  if (!module.hot.data) {\n    hotAPI.createRecord(\"data-v-82b131f0\", __vue__options__)\n  } else {\n    hotAPI.rerender(\"data-v-82b131f0\", __vue__options__)\n  }\n})()}","import axios from 'axios'\nimport _ from 'lodash'\nimport Vue from 'vue/dist/vue'\nimport Vuex from 'vuex'\n\nVue.use(Vuex);\n\nimport place_canvas from './components/place_canvas'\nimport place_inclusion_distance from './components/place_inclusion_distance'\nimport combo_list from './components/combo_list'\nimport combo_detail_place from './components/combo_detail_place'\n\nVue.component('place-canvas', require('./components/place_canvas'));\nVue.component('place-inclusion-distance', require('./components/place_inclusion_distance'));\nVue.component('combo-list', require('./components/combo_list'));\nVue.component('combo-detail-place', require('./components/combo_detail_place'));\n\nconst components = {place_canvas, place_inclusion_distance, combo_list, combo_detail_place};\n\naxios.defaults.xsrfCookieName = 'csrftoken';\naxios.defaults.xsrfHeaderName = 'X-CSRFToken';\n\nconst model_api_url = template_context.api_url;\n\nconst model_actions = {\n    get_model(context, id) {\n        axios.get(id + '/', {\n            baseURL: model_api_url,\n            params: {\n                inclusion_distance: context.state.campaign.place_inclusion_distance\n            }\n        }).then(r => {\n            context.commit('set_model', r.data);\n        }).catch(e => {\n            console.log(e);\n        });\n    },\n    get_model_list(context) {\n        axios.get('', {\n            baseURL: model_api_url,\n        }).then(r => {\n            context.commit('set_model_list', r.data);\n        }).catch(e => {\n            console.log(e);\n        });\n    },\n    add_model(context, model) {\n        axios.post('', model, {\n            baseURL: model_api_url,\n        }).then(_ => {\n            context.dispatch('get_model_list');\n        }).catch(e => {\n            console.log(e)\n        });\n    },\n    change_model(context, model) {\n        let id = model.id;\n        axios.post(id + '/', model, {\n            baseURL: model_api_url,\n        }).then(_ => {\n            context.dispatch('get_model_list');\n            context.dispatch('get_model', id);\n        }).catch(e => {\n            console.log(e)\n        });\n    },\n    delete_model(context, id) {\n        axios.delete(id + '/', {\n            baseURL: model_api_url\n        }).then(_ => {\n            context.dispatch('get_model_list');\n            context.commit('set_model', null);\n        }).catch(e => {\n            console.log(e)\n        });\n    }\n};\n\nconst model_mutators = {\n    set_model(state, new_data) {\n        state.model = new_data;\n    },\n    set_model_list(state, new_data) {\n        state.model_list = new_data;\n    }\n};\n\n\nconst store = new Vuex.Store({\n    state: Object.assign({}, template_context, {\n        model: null,\n        model_list: null,\n    }),\n    mutations: Object.assign({},\n        {\n            set_place_inclusion_distance(state, n) {\n                state.campaign.place_inclusion_distance = n;\n            },\n        },\n        model_mutators\n    ),\n    actions: model_actions\n});\n\nstore.state.refresh_model = _.debounce(function() {\n    if (! store.state.model) return;\n    store.dispatch('get_model', store.state.model.id);\n}, 300);\n\nnew Vue({\n    el: '#app',\n    store,\n    components: components\n});"]}