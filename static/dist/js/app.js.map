{"version":3,"sources":["js/clickable_row.js","js/homepagescripts.js","js/initialize.js","js/places-vue/components/Canvas.vue","js/places-vue/main.js"],"names":["module","exports","initialize","$","click","window","location","data","body","csrfSafeMethod","method","test","csrftoken","val","ajaxSetup","beforeSend","xhr","settings","type","crossDomain","setRequestHeader","toggleClass","on","combatant","addClass","label_matched_combatants","removeClass","each","which_context_type","exit_apply_context","myval","active_combatant_buttons","prop","length","effect_add_form","submit","ajax","attr","url","serialize","success","id","html","index","effect_type","combatant_id","return_html","remove_combatants_form","exit_remove_context","hasClass","combatant_to_remove_selector","effect","effect_to_apply","apply_effect_type","last_updated","Date","getTime","setTimeout","poll_server","return_data","needs_update","update_all_combatants","complete","document","addEventListener","console","log","Vue","el","render","h","Canvas"],"mappings":"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AhB,EAA8B;AAC1BC;AACAP,+BAAe,IAAIC,IAAJ,GAAWC,OAAX,EAAf;AACH;AACJ,SAXE;AAYHM,kBAAU,kBAAUvD,IAAV,EAAgB;AACtBkD,uBAAW,YAAY;AACnBC,4BAAYJ,YAAZ;AACH,aAFD,EAEG,IAFH;AAGH;AAhBE,KAAP;AAkBH;;AAED,SAASO,qBAAT,GAAiC;AAC7B,QAAIvB,MAAM,8BAAV;AACAnC,MAAEiC,IAAF,CAAO;AACHlB,cAAM,MADH;AAEHoB,aAAKA,GAFF;AAGH/B,cAAM,EAHH;AAIHiC,iBAAS,iBAAUM,WAAV,EAAuB;AAC5B,gBAAIA,gBAAgB,EAApB,EAAwB;AACpB;AACH;AACD3C,cAAE,sBAAF,EAA0BuC,IAA1B,CAA+BI,WAA/B;AACArB;AACH;AAVE,KAAP;AAYH;;AAED,SAASA,wBAAT,GAAoC;AAChC,QAAIjB,OAAOL,EAAE,MAAF,CAAX;AACA,QAAIK,KAAKyC,QAAL,CAAc,mBAAd,CAAJ,EAAwC;AACpC,YAAI1B,YAAYf,KAAKD,IAAL,CAAU,WAAV,CAAhB;AACA,YAAIgB,SAAJ,EAAe;AACXpB,cAAE,gEAAF,EAAoEwB,IAApE,CAAyE,YAAY;AACjF,oBAAIxB,EAAE,IAAF,EAAQI,IAAR,CAAa,WAAb,MAA8BgB,SAAlC,EAA6C;AACzCpB,sBAAE,IAAF,EAAQqB,QAAR,CAAiB,yBAAjB;AACH;AACJ,aAJD;AAKH;AACJ;AACJ;;;;;;ACxPDuC,SAASC,gBAAT,CAA0B,kBAA1B,EAA8C,YAAY;AACtD;AACAC,YAAQC,GAAR,CAAY,iBAAZ;AACH,CAHD;;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxIA;AAAA;;;;ACAA;;;;AACA;;;;AAEA;;;;;;AAEA,IAAIC,aAAJ,CAAQ;AACJC,QAAI,SADA;AAEJC,YAAQ;AAAA,eAAKC,EAAEC,gBAAF,CAAL;AAAA;AAFJ,CAAR","file":"../dist/js/app.js","sourcesContent":["module.exports = {\n\n    initialize: function() {\n        $('.clickable-row').click(function () {\n            window.location = $(this).data(\"href\");\n        });\n    }\n\n};\n","module.exports = {\n\n    initialize: function () {\n        var body = $('body');\n\n        function csrfSafeMethod(method) {\n            // these HTTP methods do not require CSRF protection\n            return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));\n        }\n\n        var csrftoken = $(\"[name=csrfmiddlewaretoken]\").val();\n\n        $.ajaxSetup({\n            beforeSend: function (xhr, settings) {\n                if (!csrfSafeMethod(settings.type) && !this.crossDomain) {\n                    xhr.setRequestHeader(\"X-CSRFToken\", csrftoken);\n                }\n            }\n        });\n\n        $('#display-only-toggle-button').click(function () {\n            body.toggleClass('context-display-only');\n            $(this).toggleClass('text-muted')\n        });\n\n        body.on('click', '.combatant-context-enter', function () {\n            var combatant = $(this).data('combatant');\n            body.addClass('context-combatant').data('combatant', combatant);\n            label_matched_combatants()\n        });\n        body.on('click', '.combatant-context-leave', function () {\n            body.removeClass('context-combatant').data('combatant', '');\n            $('.context-combatant-match').each(function () {\n                $(this).removeClass('context-combatant-match');\n            });\n        });\n\n        $('.enter-apply-context').click(function () {\n            var which_context_type = $(this).data('apply-effect-type');\n            body.addClass('context-apply').data('apply-effect-type', which_context_type);\n        });\n\n        $('.exit-apply-context').click(exit_apply_context);\n\n        $('#effect-to-apply').on(\"change paste keyup\", function () {\n            var myval = $(this).val();\n            var active_combatant_buttons = $('.context-activatable.active');\n            if (myval === '') {\n                $('#apply-button').prop('disabled', true);\n            } else if (active_combatant_buttons.length) {\n                $('#apply-button').prop('disabled', false);\n            }\n            active_combatant_buttons.each(function () {\n                var combatant = $(this).data('combatant');\n                $('#' + combatant + '-' + body.data('apply-effect-type')).val(myval)\n            })\n        });\n\n        var effect_add_form = $('#effect-add-form');\n        effect_add_form.submit(function () {\n            $.ajax({\n                type: effect_add_form.attr('method'),\n                url: effect_add_form.attr('action'),\n                data: effect_add_form.serialize(),\n                success: function (data) {\n                    $(\".combatant-card-body\").each(function () {\n                        // todo change combatant card body data-id to data-combatant\n                        var id = $(this).data('id');\n                        $(this).html(data[id]);\n                    });\n\n                }\n            });\n            exit_apply_context();\n            $('#effect-to-apply').val('');\n            return false;\n        });\n\n        body.on('click', '.remove-effect', function () {\n            var index = $(this).data('index');\n            var effect_type = $(this).data('effect-type');\n            var combatant_id = $(this).data('combatant');\n\n            $.ajax({\n                type: 'post',\n                url: '/ajax/remove-effect/',\n                data: {\n                    'index': index,\n                    'effect_type': effect_type,\n                    'combatant': combatant_id\n                },\n                success: function (return_html) {\n                    if (return_html === '') {\n                        return\n                    }\n                    $(\".combatant-card-body\").each(function () {\n                        if ($(this).data('id') === combatant_id) {\n                            $(this).html(return_html);\n                        }\n                    });\n                }\n            })\n        });\n\n        body.on('click', '#enter-remove-context', function () {\n            body.addClass('context-remove');\n        });\n\n        var remove_combatants_form = $('#remove-combatants-form');\n        remove_combatants_form.submit(function () {\n            $.ajax({\n                type: remove_combatants_form.attr('method'),\n                url: remove_combatants_form.attr('action'),\n                data: remove_combatants_form.serialize(),\n                success: function (return_html) {\n                    if (return_html === '') {\n                        return\n                    }\n                    $('#combatant-card-deck').html(return_html);\n                    label_matched_combatants();\n                }\n            });\n            exit_remove_context();\n            return false;\n        });\n\n\n        body.on('click', '.context-activatable', function () {\n            $(this).toggleClass('active');\n            var combatant = $(this).data('combatant');\n            if (body.hasClass('context-remove')) {\n                var combatant_to_remove_selector = $(\"#combatant-to-remove-\" + combatant);\n                if ($(this).hasClass('active')) {\n                    combatant_to_remove_selector.val('True')\n                } else {\n                    combatant_to_remove_selector.val('')\n                }\n                if ($('.context-activatable.active').length) {\n                    $('#confirm-remove-combatants-button').prop('disabled', false);\n                } else {\n                    $('#confirm-remove-combatants-button').prop('disabled', true);\n                }\n            }\n            if (body.hasClass('context-apply')) {\n                var effect = '';\n                var effect_to_apply = $('#effect-to-apply').val();\n                var apply_effect_type = body.data('apply-effect-type');\n                if ($(this).hasClass('active')) {\n                    effect = effect_to_apply\n                }\n                $('#' + combatant + '-' + apply_effect_type).val(effect);\n                if (effect_to_apply !== '') {\n                    if ($('.context-activatable.active').length) {\n                        $('#apply-button').prop('disabled', false);\n                    } else {\n                        $('#apply-button').prop('disabled', true);\n                    }\n                }\n            }\n        });\n\n        body.on('click', '#cancel-remove', exit_remove_context);\n\n        body.on('submit', '.update-initiative-form', function () {\n            $.ajax({\n                type: $(this).attr('method'),\n                url: $(this).attr('action'),\n                data: $(this).serialize(),\n                success: function (return_html) {\n                    if (return_html === '') {\n                        return\n                    }\n                    $(\"#combatant-card-deck\").html(return_html);\n                    label_matched_combatants();\n                }\n            });\n            return false;\n        });\n        var last_updated = new Date().getTime();\n        setTimeout(function () {\n            poll_server(last_updated)\n        }, 2500);\n    }\n};\n\nfunction exit_apply_context() {\n    $('body').removeClass('context-apply');\n    $('.effect-input').val('');\n    $('.context-activatable').removeClass('active');\n    $('#apply-button').prop('disabled', true)\n}\n\nfunction exit_remove_context() {\n    $('body').removeClass('context-remove');\n    $('.combatant-to-remove').val('');\n    $('.context-activatable').removeClass('active');\n    $('#confirm-remove-combatants-button').prop('disabled', true)\n}\n\nfunction poll_server(last_updated) {\n    $.ajax({\n        type: 'get',\n        url: '/ajax/poll/',\n        data: {\n            last_updated: last_updated\n        },\n        success: function (return_data) {\n            if (return_data.needs_update) {\n                update_all_combatants();\n                last_updated = new Date().getTime();\n            }\n        },\n        complete: function (data) {\n            setTimeout(function () {\n                poll_server(last_updated)\n            }, 2500);\n        }\n    })\n}\n\nfunction update_all_combatants() {\n    var url = '/ajax/update-all-combatants/';\n    $.ajax({\n        type: 'post',\n        url: url,\n        data: {},\n        success: function (return_html) {\n            if (return_html === '') {\n                return\n            }\n            $(\"#combatant-card-deck\").html(return_html);\n            label_matched_combatants();\n        }\n    });\n}\n\nfunction label_matched_combatants() {\n    var body = $('body');\n    if (body.hasClass('context-combatant')) {\n        var combatant = body.data('combatant');\n        if (combatant) {\n            $('.combatant-context-match-hide, .combatant-context-unmatch-hide').each(function () {\n                if ($(this).data('combatant') === combatant) {\n                    $(this).addClass('context-combatant-match')\n                }\n            });\n        }\n    }\n}","document.addEventListener('DOMContentLoaded', function () {\r\n    // setup?\r\n    console.log('Initialized app');\r\n});\r\n",";(function(){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _axios = require('axios');\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_axios2.default.defaults.xsrfCookieName = 'csrftoken';\n_axios2.default.defaults.xsrfHeaderName = 'X-CSRFToken';\n\nexports.default = {\n    data: function data() {\n        return {\n            shapes: [],\n            temp_points: [],\n            temp_type: null,\n            hoverable_place_class: 'hoverable-place',\n            place_types: {\n                200: 'misc region',\n                201: 'geological',\n                202: 'vegetation',\n                203: 'water',\n                204: 'political',\n                100: 'misc line',\n                101: 'road',\n                102: 'river',\n                0: 'misc point',\n                1: 'settlement',\n                2: 'natural',\n                3: 'dungeon'\n            }\n        };\n    },\n\n    methods: {\n        load_shapes: function load_shapes() {\n            var _this = this;\n\n            _axios2.default.get('/api/places/').then(function (r) {\n                _this.shapes = r.data;\n            }).catch(function (e) {\n                console.log(e);\n            });\n        },\n        get_click_coords: function get_click_coords(event) {\n            var bound = document.getElementById('place-canvas').getBoundingClientRect();\n            var html = document.documentElement;\n            var left = bound.left + window.pageXOffset - html.clientLeft;\n            var top = bound.top + window.pageYOffset - html.clientTop;\n            var x = event.pageX - left;\n            var y = event.pageY - top;\n            return { x: x, y: y };\n        },\n        enter_create_context: function enter_create_context(context) {\n            this.temp_type = context;\n            this.hoverable_place_class = '';\n        },\n        exit_and_save: function exit_and_save() {\n            var _this2 = this;\n\n            _axios2.default.post('/api/places/', {\n                points: this.temp_points,\n                dimensions: ~~(this.temp_type / 100),\n                type: this.temp_type\n            }).then(function (_) {\n                _this2.load_shapes();\n            }).catch(function (e) {\n                console.log(e);\n            });\n            this.exit_create_context();\n        },\n        exit_create_context: function exit_create_context() {\n            this.temp_points = [];\n            this.temp_type = null;\n            this.hoverable_place_class = 'hoverable-place';\n        },\n        generate_temp_point: function generate_temp_point(event) {\n            if (this.temp_type != null) {\n                var coords = this.get_click_coords(event);\n                if (this.temp_type < 100) {\n                    this.temp_points.pop();\n                }\n                this.temp_points.push(coords);\n            }\n        },\n        points_to_pointstring: function points_to_pointstring(points_obj) {\n            var pointstring = '';\n            points_obj.forEach(function (point) {\n                pointstring += point.x + ',' + point.y + ' ';\n            });\n            return pointstring;\n        },\n        place_clicked: function place_clicked(event) {\n            var $clicked = $(event.target);\n            var was_active = $clicked.hasClass('active');\n            $('.active').removeClass('active');\n            if (!was_active) {\n                $clicked.addClass('active');\n            }\n\n            var pk = event.target.id.split('-')[1];\n            console.log(pk);\n        },\n        get_temp_circle_class: function get_temp_circle_class() {\n            if (this.temp_type < 100) {\n                return 'place-type-' + this.temp_type;\n            } else {\n                return 'place-temp-point';\n            }\n        }\n    },\n    created: function created() {\n        this.load_shapes();\n    }\n};\n})()\nif (module.exports.__esModule) module.exports = module.exports.default\nvar __vue__options__ = (typeof module.exports === \"function\"? module.exports.options: module.exports)\nif (__vue__options__.functional) {console.error(\"[vueify] functional components are not supported and should be defined in plain js files using render functions.\")}\n__vue__options__.render = function render () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row container-fluid px-5\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"col-auto ml-auto p-0\",staticStyle:{\"width\":\"1200px\",\"height\":\"900px\"}},[_c('svg',{attrs:{\"id\":\"place-canvas\",\"width\":\"1200\",\"height\":\"900\"},on:{\"click\":function($event){_vm.generate_temp_point($event)}}},[_c('defs',[_c('filter',{attrs:{\"id\":\"innershadow\"}},[_c('feGaussianBlur',{attrs:{\"in\":\"SourceGraphic\",\"stdDeviation\":\"5\",\"result\":\"blur\"}}),_vm._v(\" \"),_c('feComposite',{attrs:{\"in2\":\"SourceGraphic\",\"operator\":\"arithmetic\",\"k2\":\"-1\",\"k3\":\"1\",\"result\":\"shadowDiff\"}})],1)]),_vm._v(\" \"),_c('rect',{attrs:{\"width\":\"1200\",\"height\":\"900\",\"fill\":\"transparent\",\"stroke\":\"black\",\"stroke-width\":\"2\"}}),_vm._v(\" \"),_vm._l((_vm.shapes),function(shape){return [(shape.dimensions === 2)?_c('g',[_c('polygon',{class:'place-type-' + shape.type,attrs:{\"points\":_vm.points_to_pointstring(shape.points),\"filter\":\"url(#innershadow)\"}}),_vm._v(\" \"),_c('polygon',{class:_vm.hoverable_place_class + ' place-poly-outline place-type-' + shape.type,attrs:{\"points\":_vm.points_to_pointstring(shape.points),\"id\":'place-' + shape.id},on:{\"click\":function($event){_vm.place_clicked($event)}}})]):(shape.dimensions === 1)?_c('polyline',{class:_vm.hoverable_place_class + ' place-type-' + shape.type,attrs:{\"points\":_vm.points_to_pointstring(shape.points),\"id\":'place-' + shape.id},on:{\"click\":function($event){_vm.place_clicked($event)}}}):(shape.dimensions === 0)?_vm._l((shape.points),function(pt){return _c('circle',{class:_vm.hoverable_place_class + ' place-type-' + shape.type,attrs:{\"cx\":pt.x,\"cy\":pt.y,\"r\":\"5\",\"id\":'place-' + shape.id},on:{\"click\":function($event){_vm.place_clicked($event)}}})}):_vm._e()]}),_vm._v(\" \"),(200 <= _vm.temp_type)?_c('g',[_c('polygon',{class:'place-type-' + _vm.temp_type,attrs:{\"points\":_vm.points_to_pointstring(_vm.temp_points),\"filter\":\"url(#innershadow)\"}}),_vm._v(\" \"),_c('polygon',{class:'place-poly-outline place-type-' + _vm.temp_type,attrs:{\"points\":_vm.points_to_pointstring(_vm.temp_points)}})]):(100 <= _vm.temp_type)?_c('polyline',{class:'place-type-' + _vm.temp_type,attrs:{\"points\":_vm.points_to_pointstring(_vm.temp_points)}}):_vm._e(),_vm._v(\" \"),_vm._l((_vm.temp_points),function(pt){return _c('circle',{class:_vm.get_temp_circle_class(),attrs:{\"cx\":pt.x,\"cy\":pt.y,\"r\":\"5\"}})})],2)]),_vm._v(\" \"),_c('div',{staticClass:\"col-auto ml-2\"},[_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-header bg-dark text-white\"},[_vm._v(\"\\n        Key\\n      \")]),_vm._v(\" \"),_c('ul',{staticClass:\"list-group list-group-flush\"},_vm._l((_vm.place_types),function(name,type){return _c('li',{staticClass:\"list-group-item\"},[_c('svg',{attrs:{\"width\":\"16\",\"height\":\"16\"}},[(type < 100)?_c('circle',{class:'place-type-' + type,attrs:{\"cx\":\"8\",\"cy\":\"8\",\"r\":\"5\"}}):(type < 200)?_c('polyline',{class:'place-type-' + type,attrs:{\"points\":\"2,2 4,12 14,14\"}}):_c('g',[_c('polygon',{class:'place-type-' + type,attrs:{\"points\":\"2,2 50,0 0,50\",\"filter\":\"url(#innershadow)\"}}),_vm._v(\" \"),_c('polygon',{class:'place-poly-outline place-type-' + type,attrs:{\"points\":\"2,2 50,0 0,50\"}})])]),_vm._v(\"\\n          \"+_vm._s(name)+\"\\n          \"),_c('button',{staticClass:\"btn btn-sm btn-light rounded-circle\",on:{\"click\":function($event){_vm.enter_create_context(type)}}},[_vm._v(\"+\")])])}))]),_vm._v(\" \"),(_vm.temp_type != null)?_c('button',{staticClass:\"btn btn-outline-success\",on:{\"click\":_vm.exit_and_save}},[_vm._v(\"\\n      Save\\n    \")]):_vm._e(),_vm._v(\" \"),(_vm.temp_type != null)?_c('button',{staticClass:\"btn btn-outline-danger\",on:{\"click\":_vm.exit_create_context}},[_vm._v(\"\\n      Cancel\\n    \")]):_vm._e()])])}\n__vue__options__.staticRenderFns = [function render () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"col\"},[_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-header bg-dark text-white\"},[_vm._v(\"\\n        Place name\\n      \")]),_vm._v(\" \"),_c('div',{staticClass:\"card-body\"},[_vm._v(\"\\n        Lorem ipsum\\n      \")]),_vm._v(\" \"),_c('div',{staticClass:\"card-footer\"},[_vm._v(\"\\n        footer stuff\\n      \")])])])}]\nif (module.hot) {(function () {  var hotAPI = require(\"vue-hot-reload-api\")\n  hotAPI.install(require(\"vue\"), true)\n  if (!hotAPI.compatible) return\n  module.hot.accept()\n  if (!module.hot.data) {\n    hotAPI.createRecord(\"data-v-43273a22\", __vue__options__)\n  } else {\n    hotAPI.reload(\"data-v-43273a22\", __vue__options__)\n  }\n})()}","import axios from 'axios'\nimport Vue from 'vue'\n\nimport Canvas from './components/Canvas.vue'\n\nnew Vue({\n    el: '#canvas',\n    render: h => h(Canvas)\n});"]}